> **mypy** ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è **—Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤** –≤ Python.
> 
> –û–Ω –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ–¥ –ø–æ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º (`type hints`) –∏ –ø–æ–º–æ–≥–∞–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å –æ—à–∏–±–∫–∏ **–µ—â—ë –¥–æ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã**.
> 
> –í –Ω–∞—à–µ–π –∫–æ–º–∞–Ω–¥–µ –≤ –¢-–ë–∞–Ω–∫–µ –º—ã –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º mypy –≤ CI/CD-–ø–∞–π–ø–ª–∞–π–Ω–µ –∏ –≤ pre-commit ‚Äî —á—Ç–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —á–∏—Å—Ç–æ—Ç—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏.
> 
> –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–Ω–æ –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ, –≥–¥–µ –º–Ω–æ–≥–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ ‚Äî mypy —Ä–µ–∞–ª—å–Ω–æ —Å–ø–∞—Å–∞–µ—Ç –æ—Ç –æ—à–∏–±–æ–∫ –≤ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞—Ö –∏ –Ω–µ–≤–µ—Ä–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö.

---

## üîπ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç mypy

- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Ç–∏–ø—ã –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏.
    
- –ü–æ–º–æ–≥–∞–µ—Ç IDE –ø–æ–Ω–∏–º–∞—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π.
    
- –õ–æ–≤–∏—Ç –æ—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω—ã –≤–æ –≤—Ä–µ–º—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è.
    
- –†–∞–±–æ—Ç–∞–µ—Ç **–¥–æ –∑–∞–ø—É—Å–∫–∞** –∫–æ–¥–∞ ‚Äî —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏.
    

üìò –ü—Ä–∏–º–µ—Ä:

```
def add(a: int, b: int) -> int:
    return a + b

add("2", 3)  # –û—à–∏–±–∫–∞ mypy: –∞—Ä–≥—É–º–µ–Ω—Ç 1 –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å int, –∞ –Ω–µ str

```

---

## üîπ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ mypy

|–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ|–ß—Ç–æ –¥–∞—ë—Ç|
|---|---|
|‚úÖ **–†–∞–Ω–Ω–µ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫**|–û—à–∏–±–∫–∏ —Ç–∏–ø–æ–≤ –ª–æ–≤—è—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ —Å–±–æ—Ä–∫–∏, –¥–æ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞|
|üß† **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ç–∏–ø—ã**|–ö–æ–¥ —Å–∞–º —Å–µ–±—è –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ—Ç ‚Äî –Ω–µ –Ω—É–∂–Ω–æ –æ–±—ä—è—Å–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É|
|üöÄ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ IDE –∏ –∞–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç–∞**|IDE (PyCharm, VSCode) –ø–æ–Ω–∏–º–∞–µ—Ç —Ç–∏–ø—ã –∏ –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥—ã|
|üß© **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å legacy-–∫–æ–¥–æ–º**|–ú–æ–∂–Ω–æ –≤–Ω–µ–¥—Ä—è—Ç—å –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ ‚Äî —Ñ–∞–π–ª –∑–∞ —Ñ–∞–π–ª–æ–º|
|üßµ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∏ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –Ω–∞–¥—ë–∂–Ω–µ–µ**|–û—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –¥–ª—è async/await –∏ data models|
|üß∞ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ CI/CD**|–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º —ç—Ç–∞–ø–æ–º –ø–∞–π–ø–ª–∞–π–Ω–∞|

---

## üîπ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ —Ç–≤–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö

> –í –¢-–ë–∞–Ω–∫–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º `mypy` –≤–º–µ—Å—Ç–µ —Å **Ruff** –∏ **Black**.
> 
> –ù–∞–ø—Ä–∏–º–µ—Ä, —É –Ω–∞—Å —Å–µ—Ä–≤–∏—Å—ã –Ω–∞ **FastAPI** –∏ **asyncpg**, –≥–¥–µ —á–∞—Å—Ç–æ –ø—Ä–æ—Ö–æ–¥—è—Ç –æ–±—ä–µ–∫—Ç—ã —Å —Ä–∞–∑–Ω—ã–º–∏ —Å—Ö–µ–º–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö.
> 
> –ë–ª–∞–≥–æ–¥–∞—Ä—è –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º –∏ mypy:
> 
> - –º—ã –ª–æ–≤–∏–º –æ—à–∏–±–∫–∏ –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Ç–∏–ø–æ–≤ –µ—â—ë –¥–æ —Ä–µ–≤—å—é,
>     
> - IDE –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–∏–µ –ø–æ–ª—è –µ—Å—Ç—å —É `pydantic`-–º–æ–¥–µ–ª–µ–π,
>     
> - –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏—è –ø–æ–º–æ–≥–∞–µ—Ç –ø—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ ‚Äî –∫–æ–≥–¥–∞ –º–µ–Ω—è—é—Ç—Å—è DTO –∏–ª–∏ –æ—Ç–≤–µ—Ç—ã API.
>     

üìò _–¢–∏–ø–∏—á–Ω—ã–π —Å–ª—É—á–∞–π:_  
mypy –ª–æ–≤–∏—Ç –æ—à–∏–±–∫—É, –∫–æ–≥–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø—ã—Ç–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥–∞—Ç—å `Optional[str]` –≤ —Ñ—É–Ω–∫—Ü–∏—é, –≥–¥–µ –æ–∂–∏–¥–∞–µ—Ç—Å—è `str`:

```
def normalize_name(name: str) -> str:
    return name.strip().title()

def process(user: dict):
    # mypy: Argument 1 to "normalize_name" has incompatible type "Optional[str]"
    normalized = normalize_name(user.get("name"))

```

---

## üîπ –ö–∞–∫ —ç—Ç–æ –≤—Å—Ç—Ä–æ–µ–Ω–æ –≤ CI/CD

```
lint:
  stage: lint
  script:
    - pip install ruff black mypy
    - black --check .
    - ruff check .
    - mypy .

```
üìò _–ü–æ—Ä–æ–≥ –æ—à–∏–±–æ–∫ (strict mode):_

```
# mypy.ini
[mypy]
python_version = 3.11
disallow_untyped_defs = True
check_untyped_defs = True
ignore_missing_imports = True
strict_optional = True

```

---

## üí¨ –ö–∞–∫ –º–æ–∂–Ω–æ –∫—Ä–∞—Å–∏–≤–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –æ—Ç–≤–µ—Ç

> –í –∏—Ç–æ–≥–µ, mypy –ø–æ–º–æ–≥–∞–µ—Ç –¥–µ—Ä–∂–∞—Ç—å –∫–æ–¥–æ–≤—É—é –±–∞–∑—É –≤ –±–æ–ª—å—à–æ–º –ø—Ä–æ–µ–∫—Ç–µ —É—Å—Ç–æ–π—á–∏–≤–æ–π:  
> –º–µ–Ω—å—à–µ ‚Äú–º–∞–≥–∏—á–µ—Å–∫–∏—Ö‚Äù –æ—à–∏–±–æ–∫ –Ω–∞ –ø—Ä–æ–¥–µ, –º–µ–Ω—å—à–µ –ø—É—Ç–∞–Ω–∏—Ü—ã –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏,  
> –∏ –ø—Ä–æ—â–µ —Ä–µ–≤—å—é–∏—Ç—å —á—É–∂–æ–π –∫–æ–¥, –ø–æ—Ç–æ–º—É —á—Ç–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π –æ–ø–∏—Å–∞–Ω—ã —Ç–∏–ø–∞–º–∏.
> 
> –ü–æ —Å—É—Ç–∏, —ç—Ç–æ **‚Äú–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–Ω–∞—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞‚Äù –¥–ª—è Python** ‚Äî –∏ –≤ –±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö –≤—Ä–æ–¥–µ –Ω–∞—à–∏—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –¢-–ë–∞–Ω–∫–∞ –æ–Ω–∞ —Ä–µ–∞–ª—å–Ω–æ —Å–µ–±—è –æ–ø—Ä–∞–≤–¥—ã–≤–∞–µ—Ç.