> **CI/CD** ‚Äî —ç—Ç–æ –ø–æ–¥—Ö–æ–¥ –∫ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –¥–æ—Å—Ç–∞–≤–∫–∏ –∫–æ–¥–∞.
> 
> –í –º–æ–∏—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö –≤ –¢-–ë–∞–Ω–∫–µ –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ **GitLab CI/CD** (–∏–Ω–æ–≥–¥–∞ Jenkins –¥–ª—è —Å—Ç–∞—Ä—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤) –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ ‚Äî –æ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞ –¥–æ –¥–µ–ø–ª–æ—è –≤ Kubernetes.
> 
> –¶–µ–ª—å ‚Äî —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã –∫–∞–∂–¥—ã–π –∫–æ–º–º–∏—Ç –º–æ–∂–Ω–æ –±—ã–ª–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞, –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞–≤ —Ä—É—á–Ω—ã–µ —à–∞–≥–∏.

---

## üîπ CI/CD –≤ –¥–≤—É—Ö —Å–ª–æ–≤–∞—Ö

- **CI (Continuous Integration)** ‚Äî ‚Äú–Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è‚Äù:  
    –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∫–æ–º–º–∏—Ç–µ.
    
- **CD (Continuous Delivery / Deployment)** ‚Äî ‚Äú–Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –∏–ª–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ‚Äù:  
    –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–∫–∞—Ç—ã–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω—ã—Ö —Å–±–æ—Ä–æ–∫ –≤ staging –∏ production.
    

---

## üîπ –û—Å–Ω–æ–≤–Ω—ã–µ —ç—Ç–∞–ø—ã CI/CD –ø–∞–π–ø–ª–∞–π–Ω–∞

|–≠—Ç–∞–ø|–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç|–ß—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è|
|---|---|---|
|**1. Lint / Static checks**|–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ –∏ —Å—Ç–∏–ª—è|`flake8`, `mypy`, `black`, `pylint`|
|**2. Unit tests**|–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—á—ë—Ç–æ–≤ –æ –ø–æ–∫—Ä—ã—Ç–∏–∏|`pytest`, `coverage`|
|**3. Build / Packaging**|–°–±–æ—Ä–∫–∞ Docker-–æ–±—Ä–∞–∑–∞, –≤–µ—Ä—Å–∏—è —á–µ—Ä–µ–∑ Git tag|`Docker`, `Poetry`, `Makefile`|
|**4. Integration / e2e tests**|–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ —Å–≤—è–∑–∫–µ|`pytest + docker-compose`, `testcontainers`|
|**5. Security / SAST**|–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–∏|`trivy`, `bandit`, `safety`|
|**6. Deploy (CD)**|–î–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ CI/CD-–ø–∞–π–ø–ª–∞–π–Ω –≤ staging/prod|`GitLab CI`, `Helm`, `Kubernetes`, `ArgoCD`|
|**7. Monitoring / Rollback**|–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è –¥–µ–ø–ª–æ—è, –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö ‚Äî –æ—Ç–∫–∞—Ç|`Prometheus`, `Grafana`, `Argo Rollouts`|

---

## üîπ –ü—Ä–∏–º–µ—Ä –∏–∑ —Ç–≤–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –¢-–ë–∞–Ω–∫–µ

> –í –ø—Ä–æ–µ–∫—Ç–µ —Å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏ –Ω–∞ FastAPI —É –Ω–∞—Å –±—ã–ª GitLab CI-–ø–∞–π–ø–ª–∞–π–Ω:
> 
> - –ø—Ä–∏ **merge request** –∑–∞–ø—É—Å–∫–∞–ª–∏—Å—å –ª–∏–Ω—Ç–µ—Ä—ã (`black`, `flake8`, `mypy`) –∏ unit-—Ç–µ—Å—Ç—ã;
>     
> - –ø–æ—Å–ª–µ merge ‚Äî —Å–±–æ—Ä–∫–∞ Docker-–æ–±—Ä–∞–∑–∞ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –≤ **GitLab Registry**;
>     
> - –∑–∞—Ç–µ–º **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π** –≤ Kubernetes —á–µ—Ä–µ–∑ Helm-—á–∞—Ä—Ç (staging ‚Üí prod);
>     
> - –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –∑–∞–ø—É—Å–∫–∞–ª–∏—Å—å **health-checks** –∏ e2e-—Ç–µ—Å—Ç—ã;
>     
> - –ø—Ä–∏ —Å–±–æ–µ rollout –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫–∞—Ç—ã–≤–∞–ª—Å—è –¥–æ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ —Ä–µ–ª–∏–∑–∞.
>     

üì¶ **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**  
`GitLab CI/CD`, `Docker`, `Helm`, `Kubernetes`, `ArgoCD`, `Prometheus`, `Grafana`, `pytest`, `black`, `flake8`.

---

## üîπ –¢–∏–ø–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `.gitlab-ci.yml`

```
stages:
  - lint
  - test
  - build
  - deploy

lint:
  stage: lint
  script:
    - pip install black flake8 mypy
    - black --check .
    - flake8 .
    - mypy .

test:
  stage: test
  script:
    - pytest --cov=app tests/

build:
  stage: build
  script:
    - docker build -t registry.tbank.local/app:$CI_COMMIT_SHA .
    - docker push registry.tbank.local/app:$CI_COMMIT_SHA

deploy:
  stage: deploy
  script:
    - helm upgrade --install app ./helm/app --set image.tag=$CI_COMMIT_SHA
  environment: production

```

---

## üí¨ –ö–∞–∫ –º–æ–∂–Ω–æ –∫—Ä–∞—Å–∏–≤–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –æ—Ç–≤–µ—Ç

> –î–ª—è –º–µ–Ω—è CI/CD ‚Äî —ç—Ç–æ —Å–ø–æ—Å–æ–± **–∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç —Ä—É—á–Ω—ã—Ö —à–∞–≥–æ–≤**, —É—Å–∫–æ—Ä–∏—Ç—å —Ü–∏–∫–ª ‚Äú–∫–æ–¥ ‚Üí –ø—Ä–æ–¥‚Äù,  
> –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –∫–∞–∂–¥–∞—è –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏.
> 
> –í –¢-–ë–∞–Ω–∫–µ –º—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–ª–∏ –≤—Å—ë –≤–ø–ª–æ—Ç—å –¥–æ –¥–µ–ø–ª–æ—è –∏ rollback‚Äô–∞ ‚Äî  
> –∏ —ç—Ç–æ —Å–∏–ª—å–Ω–æ –ø–æ–≤—ã—Å–∏–ª–æ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Ä–µ–ª–∏–∑–æ–≤ –∏ —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.