> –ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ–ø–∞–¥–∞–µ—Ç –≤ **Docker Registry** ‚Äî —ç—Ç–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è Docker-–æ–±—Ä–∞–∑–æ–≤.
> 
> –í –Ω–∞—à–µ–º –ø–∞–π–ø–ª–∞–π–Ω–µ (–≤ –¢-–ë–∞–Ω–∫–µ) —Å–±–æ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç –≤ GitLab CI:
> 
> - —Å–Ω–∞—á–∞–ª–∞ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –æ–±—Ä–∞–∑,
>     
> - –ø–æ—Ç–æ–º –æ–Ω –ø—É—à–∏—Ç—Å—è –≤ **–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π GitLab Container Registry** —Å —Ç–µ–≥–æ–º, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –∫–æ–º–º–∏—Ç—É –∏–ª–∏ —Ä–µ–ª–∏–∑—É,
>     
> - –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∏–∑ —Ä–µ–µ—Å—Ç—Ä–∞ –æ–±—Ä–∞–∑ –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è –Ω–∞ staging –∏–ª–∏ prod –ø—Ä–∏ –¥–µ–ø–ª–æ–µ —á–µ—Ä–µ–∑ Helm –≤ Kubernetes.
>     
> 
> –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –∫–∞–∂–¥—ã–π —Ä–µ–ª–∏–∑ –∏–º–µ–µ—Ç —Å–≤–æ–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç, –∏ –º—ã –º–æ–∂–µ–º –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∫ –ª—é–±–æ–π –≤–µ—Ä—Å–∏–∏ –ø—Ä–æ—Å—Ç–æ –ø–æ–º–µ–Ω—è–≤ —Ç–µ–≥ –æ–±—Ä–∞–∑–∞.

---

## üîπ –ß—Ç–æ —Ç–∞–∫–æ–µ Docker Registry

–≠—Ç–æ –∞–Ω–∞–ª–æ–≥ ‚Äú—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –¥–ª—è –æ–±—Ä–∞–∑–æ–≤‚Äù ‚Äî –∫–∞–∫ PyPI –¥–ª—è –ø–∞–∫–µ—Ç–æ–≤ –∏–ª–∏ GitHub –¥–ª—è –∫–æ–¥–∞.  
–û–Ω —Ö—Ä–∞–Ω–∏—Ç —Å–æ–±—Ä–∞–Ω–Ω—ã–µ Docker-–æ–±—Ä–∞–∑—ã, –∫ –∫–æ—Ç–æ—Ä—ã–º –º–æ–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –ø–æ –∏–º–µ–Ω–∏ –∏ —Ç–µ–≥—É:

`registry.tbank.local/backend/app:1.0.3`

---

## üîπ –ö–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ (–ø—Ä–∏–º–µ—Ä –ø–∞–π–ø–ª–∞–π–Ω–∞)

```
build:
  stage: build
  image: docker:latest
  services:
    - docker:dind
  script:
    - docker build -t registry.tbank.local/backend/app:$CI_COMMIT_SHA .
    - docker push registry.tbank.local/backend/app:$CI_COMMIT_SHA
  only:
    - main

```
üìò –ó–¥–µ—Å—å:

- `docker build` ‚Äî —Å–æ–±–∏—Ä–∞–µ—Ç –æ–±—Ä–∞–∑ –∏–∑ Dockerfile
    
- `docker push` ‚Äî –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ **registry**
    
- `$CI_COMMIT_SHA` ‚Äî —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ç–µ–≥ (–º–æ–∂–µ—Ç –±—ã—Ç—å –≤–µ—Ä—Å–∏—è, git tag, ‚Äúlatest‚Äù –∏ —Ç.–ø.)
    

---

## üîπ –ö—É–¥–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –º–æ–∂–µ—Ç –ø–æ–ø–∞—Å—Ç—å –æ–±—Ä–∞–∑

|–°—Ä–µ–¥–∞|–ü—Ä–∏–º–µ—Ä —Ä–µ–µ—Å—Ç—Ä–∞|–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è|
|---|---|---|
|üè¶ **–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ä–µ–µ—Å—Ç—Ä –∫–æ–º–ø–∞–Ω–∏–∏**|`registry.tbank.local/...`|–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã, CI/CD –ø–∞–π–ø–ª–∞–π–Ω—ã|
|üê≥ **Docker Hub**|`docker.io/user/app:1.0.0`|–û—Ç–∫—Ä—ã—Ç—ã–µ –ø—Ä–æ–µ–∫—Ç—ã|
|üß± **GitLab Container Registry**|`registry.gitlab.com/team/project/app`|–í—Å—Ç—Ä–æ–µ–Ω–æ –≤ GitLab|
|‚òÅÔ∏è **–û–±–ª–∞—á–Ω—ã–µ —Ä–µ–µ—Å—Ç—Ä—ã**|`ghcr.io`, `aws ecr`, `gcr.io`, `cr.yandex`|–î–ª—è –¥–µ–ø–ª–æ—è –≤ –æ–±–ª–∞—á–Ω—ã–µ Kubernetes|
|‚öôÔ∏è **Harbor / Nexus / Artifactory**|`harbor.company.net/project/app`|–ß–∞—Å—Ç–Ω—ã–µ enterprise-—Ä–µ–µ—Å—Ç—Ä—ã|

---

## üîπ –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–∞–ª—å—à–µ

1. **CI/CD** —Å–æ–±—Ä–∞–ª –æ–±—Ä–∞–∑ ‚Üí –ø–æ–ª–æ–∂–∏–ª –≤ Registry.
    
2. **CD-–ø–∞–π–ø–ª–∞–π–Ω** (Helm, ArgoCD, GitOps) –≤—ã—Ç—è–≥–∏–≤–∞–µ—Ç –Ω—É–∂–Ω—ã–π —Ç–µ–≥:
    
    `image:   repository: registry.tbank.local/backend/app   tag: 1.2.4`
    
3. Kubernetes —Å–∫–∞—á–∏–≤–∞–µ—Ç –æ–±—Ä–∞–∑ –∏–∑ Registry –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ Pod.
    
4. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è ‚Äî –ø—Ä–æ—Å—Ç–æ –º–µ–Ω—è–µ–º —Ç–µ–≥ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π.
    

---

## üîπ –ü—Ä–∏–º–µ—Ä –∏–∑ —Ç–≤–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –¢-–ë–∞–Ω–∫–µ

> –£ –Ω–∞—Å GitLab CI —Å–æ–±–∏—Ä–∞–µ—Ç Docker-–æ–±—Ä–∞–∑—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞.  
> –ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –æ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—É—à–∞—Ç—Å—è –≤ **–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π Container Registry –¢-–ë–∞–Ω–∫–∞** (`registry.tbank.local/...`).
> 
> –ó–∞—Ç–µ–º –≤ Helm chart –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ—Ç –∂–µ —Ç–µ–≥, –∏ ArgoCD –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ–±—Ä–∞–∑ –≤ Kubernetes –∫–ª–∞—Å—Ç–µ—Ä.
> 
> –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –ø—Ä–æ–¥ –≤—Å–µ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è **–∏–º–µ–Ω–Ω–æ —Å —Ç–µ–º –æ–±—Ä–∞–∑–æ–º, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ—à—ë–ª —Ç–µ—Å—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä–∫—É** –≤ CI.

---

## üí¨ –ö–∞–∫ –º–æ–∂–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –æ—Ç–≤–µ—Ç

> –¢–æ –µ—Å—Ç—å –ø–æ —Å—É—Ç–∏, –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî —ç—Ç–æ –≥–æ—Ç–æ–≤—ã–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç,  
> –∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è –æ–Ω –≤ Registry, –∫–∞–∫ ‚Äú–µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã‚Äù –¥–ª—è –≤—Å–µ—Ö –æ–∫—Ä—É–∂–µ–Ω–∏–π: dev, stage, prod.
> 
> –≠—Ç–æ –¥–µ–ª–∞–µ—Ç –¥–µ–ø–ª–æ–π –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º –∏ –¥–∞—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±—ã—Å—Ç—Ä–æ –æ—Ç–∫–∞—Ç—ã–≤–∞—Ç—å—Å—è –Ω–∞ —Å—Ç–∞–±–∏–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é.