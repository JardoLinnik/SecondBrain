> –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É **Read Committed** –∏ **Repeatable Read** ‚Äî –≤ —Ç–æ–º,  
> **–∫–æ–≥–¥–∞ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è snapshot** (—Å–Ω–∏–º–æ–∫ –≤–∏–¥–∏–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö) –∏ **–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ª–∏ –æ–Ω –≤ —Ç–µ—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**.
> 
> üîπ –í **Read Committed** ‚Äî –Ω–æ–≤—ã–π snapshot —Å–æ–∑–¥–∞—ë—Ç—Å—è **–ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ**.  
> –¢–æ –µ—Å—Ç—å —Ç—ã –≤—Å–µ–≥–¥–∞ –≤–∏–¥–∏—à—å —Å–∞–º—ã–µ —Å–≤–µ–∂–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.
> 
> üîπ –í **Repeatable Read** ‚Äî snapshot —Å–æ–∑–¥–∞—ë—Ç—Å—è **–æ–¥–∏–Ω —Ä–∞–∑, –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**.  
> –ò –¥–∞–ª—å—à–µ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –≤–Ω—É—Ç—Ä–∏ –Ω–µ—ë –≤–∏–¥—è—Ç **–æ–¥–∏–Ω–∞–∫–æ–≤—É—é –∫–∞—Ä—Ç–∏–Ω—É –¥–∞–Ω–Ω—ã—Ö**,  
> –¥–∞–∂–µ –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ –≤ —ç—Ç–æ –≤—Ä–µ–º—è —á—Ç–æ-—Ç–æ –∫–æ–º–º–∏—Ç–Ω—É–ª.
> 
> –í –¢-–ë–∞–Ω–∫–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º Repeatable Read —Ç–∞–º, –≥–¥–µ –≤–∞–∂–Ω–∞ **–ª–æ–≥–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –æ—Ç—á—ë—Ç–æ–≤ –∏ —Ä–∞—Å—á—ë—Ç–æ–≤** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–∞–ª–∞–Ω—Å –Ω–∞ –º–æ–º–µ–Ω—Ç –Ω–∞—á–∞–ª–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏),  
> –∞ Read Committed ‚Äî –¥–ª—è –æ–±—ã—á–Ω—ã—Ö CRUD-–æ–ø–µ—Ä–∞—Ü–∏–π, –≥–¥–µ –Ω—É–∂–Ω–æ –≤–∏–¥–µ—Ç—å ‚Äú–∞–∫—Ç—É–∞–ª—å–Ω–æ–µ‚Äù —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

---

## üîç –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º: MVCC –∏ snapshots

PostgreSQL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **MVCC (Multi-Version Concurrency Control)** ‚Äî  
–∫–∞–∂–¥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ ‚Äú–≤–µ—Ä—Å–∏—é‚Äù –¥–∞–Ω–Ω—ã—Ö, –∞–∫—Ç—É–∞–ª—å–Ω—É—é –¥–ª—è —Å–≤–æ–µ–≥–æ snapshot-–∞.

---

### üîπ Read Committed

- –ö–∞–∂–¥—ã–π **–∑–∞–ø—Ä–æ—Å** (`SELECT`, `UPDATE`, `DELETE`) –ø–æ–ª—É—á–∞–µ—Ç **–Ω–æ–≤—ã–π snapshot**.
    
- Snapshot –≤–∫–ª—é—á–∞–µ—Ç **–≤—Å–µ –∫–æ–º–º–∏—Ç–Ω—É—Ç—ã–µ** –Ω–∞ –º–æ–º–µ–Ω—Ç –Ω–∞—á–∞–ª–∞ –∑–∞–ø—Ä–æ—Å–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.
    
- –ï—Å–ª–∏ –¥—Ä—É–≥–æ–π —Å–µ–∞–Ω—Å —á—Ç–æ-—Ç–æ –∑–∞–∫–æ–º–º–∏—Ç–∏–ª –º–µ–∂–¥—É –¥–≤—É–º—è –∑–∞–ø—Ä–æ—Å–∞–º–∏ ‚Äî —Ç—ã —ç—Ç–æ —É–∂–µ —É–≤–∏–¥–∏—à—å.
    

üîß –ü—Ä–∏–º–µ—Ä:

`BEGIN; SELECT balance FROM accounts WHERE id = 1;  -- –≤–∏–¥–∏—à—å 100 -- –¥—Ä—É–≥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏ –∫–æ–º–º–∏—Ç–∏—Ç: balance=200 SELECT balance FROM accounts WHERE id = 1;  -- –≤–∏–¥–∏—à—å —É–∂–µ 200 COMMIT;`

üü¢ Snapshot –æ–±–Ω–æ–≤–∏–ª—Å—è –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ ‚Üí –¥–∞–Ω–Ω—ã–µ ‚Äú—Å–≤–µ–∂–∏–µ‚Äù.

---

### üîπ Repeatable Read

- Snapshot —Å–æ–∑–¥–∞—ë—Ç—Å—è **–æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –Ω–∞—á–∞–ª–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**.
    
- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –≤ —Ä–∞–º–∫–∞—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤–∏–¥—è—Ç **–æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –¥–∞–Ω–Ω—ã–µ** ‚Äî  
    –¥–∞–∂–µ –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ —É—Å–ø–µ–ª –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ –Ω–∞—á–∞–ª–∞.
    

üîß –ü—Ä–∏–º–µ—Ä:

`BEGIN TRANSACTION ISOLATION LEVEL REPEATABLE READ; SELECT balance FROM accounts WHERE id = 1;  -- –≤–∏–¥–∏—à—å 100 -- –¥—Ä—É–≥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∫–æ–º–º–∏—Ç–∏—Ç: balance=200 SELECT balance FROM accounts WHERE id = 1;  -- –≤—Å—ë –µ—â—ë –≤–∏–¥–∏—à—å 100 COMMIT;`

üü° Snapshot —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω ‚Üí –¥–∞–Ω–Ω—ã–µ ¬´–∑–∞–º–æ—Ä–æ–∂–µ–Ω—ã¬ª –Ω–∞ –º–æ–º–µ–Ω—Ç —Å—Ç–∞—Ä—Ç–∞.

---

## üìä –¢–∞–±–ª–∏—á–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ

|–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞|Read Committed|Repeatable Read|
|---|---|---|
|–ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞—ë—Ç—Å—è snapshot|–ü—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ|–û–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ `BEGIN`|
|–í–∏–¥–∏–º–æ—Å—Ç—å —á—É–∂–∏—Ö –∫–æ–º–º–∏—Ç–æ–≤|–°—Ä–∞–∑—É –ø–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞|–ù–µ –≤–∏–¥–Ω—ã –¥–æ –∫–æ–Ω—Ü–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏|
|–§–∞–Ω—Ç–æ–º–Ω—ã–µ —á—Ç–µ–Ω–∏—è|–í–æ–∑–º–æ–∂–Ω—ã|–í PostgreSQL ‚Äî **–Ω–µ—Ç** (MVCC –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç)|
|–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –≤–Ω—É—Ç—Ä–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏|–ù–µ—Ç|–ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞|
|–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è|CRUD, OLTP|–û—Ç—á—ë—Ç—ã, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞, —Ä–∞—Å—á—ë—Ç—ã|

---

## ‚öôÔ∏è –ü–æ—á–µ–º—É PostgreSQL –æ—Å–æ–±–µ–Ω–Ω—ã–π

> –í –¥—Ä—É–≥–∏—Ö –°–£–ë–î (–Ω–∞–ø—Ä–∏–º–µ—Ä, Oracle, MySQL) `Repeatable Read` –º–æ–∂–µ—Ç –¥–æ–ø—É—Å–∫–∞—Ç—å ‚Äúphantom reads‚Äù.
> 
> –ê –≤ PostgreSQL ‚Äî **–Ω–µ—Ç**:  
> –æ–Ω —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫ ‚Äúsnapshot isolation‚Äù ‚Äî —Ç–æ –µ—Å—Ç—å –¥–∞–∂–µ –Ω–æ–≤—ã–µ –≤—Å—Ç–∞–≤–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ø–∞–¥–∞—é—Ç –ø–æ–¥ `WHERE`, –Ω–µ –≤–∏–¥–Ω—ã, –µ—Å–ª–∏ –∏—Ö –Ω–µ –±—ã–ª–æ –≤ –º–æ–º–µ–Ω—Ç —Å—Ç–∞—Ä—Ç–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏.

–≠—Ç–æ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è —Ç–µ–º, —á—Ç–æ PostgreSQL —Ö—Ä–∞–Ω–∏—Ç `xmin` –∏ `xmax` (–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π) –≤ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ,  
–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏—Ö –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ snapshot-—É.

---

## üß© –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

`–í—Ä–µ–º—è ‚Üí ‚Üí T1 (Repeatable Read): BEGIN   [snapshot fixed here]     SELECT ... (–≤–∏–¥–∏—Ç 100) T2: UPDATE ... SET balance=200; COMMIT T1: SELECT ... (–≤—Å—ë –µ—â—ë –≤–∏–¥–∏—Ç 100) T1: COMMIT`

–ê –≤ **Read Committed**:

`T1: BEGIN     SELECT ... (–≤–∏–¥–∏—Ç 100) T2: UPDATE ... SET balance=200; COMMIT T1: SELECT ... (–≤–∏–¥–∏—Ç 200) T1: COMMIT`

---

## üîπ –ü—Ä–∏–º–µ—Ä –∏–∑ –¢-–ë–∞–Ω–∫–∞

> –í –¢-–ë–∞–Ω–∫–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ä–∞–∑–Ω—ã–µ —É—Ä–æ–≤–Ω–∏ –∏–∑–æ–ª—è—Ü–∏–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å—Ü–µ–Ω–∞—Ä–∏—è:
> 
> - **Read Committed** ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏, –∫–ª–∏–µ–Ω—Ç–∞–º–∏, –ª–æ–≥–∞–º–∏.  
>     –ó–¥–µ—Å—å –≤–∞–∂–Ω–µ–µ _–∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å_, –∞ –Ω–µ ¬´–∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω–∞—è¬ª –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å.
>     
> - **Repeatable Read** ‚Äî –¥–ª—è —Ä–∞—Å—á—ë—Ç–æ–≤ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏,  
>     –≥–¥–µ –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –±—ã–ª–∏ **–Ω–∞ –æ–¥–∏–Ω –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏**.  
>     –ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –æ—Ç—á—ë—Ç–∞:  
>     –µ—Å–ª–∏ —á–∞—Å—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∞, –∞ —á–∞—Å—Ç—å ‚Äî –Ω–µ—Ç,  
>     –ø–æ–ª—É—á–∏—Ç—Å—è —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω.  
>     Repeatable Read —Ä–µ—à–∞–µ—Ç —ç—Ç–æ ‚Äî –æ—Ç—á—ë—Ç –≤–∏–¥–∏—Ç –µ–¥–∏–Ω—É—é, ‚Äú—á–∏—Å—Ç—É—é‚Äù –∫–∞—Ä—Ç–∏–Ω—É.
>     

üß∞ **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**  
`PostgreSQL`, `SQLAlchemy`, `Airflow`, `pandas`, `ClickHouse` (–¥–ª—è –∞–≥—Ä–µ–≥–∞—Ç–æ–≤), `pg_stat_activity` (–¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –∏–∑–æ–ª—è—Ü–∏–∏).

---

## üí¨ –ö–∞–∫ –º–æ–∂–Ω–æ –∫—Ä–∞—Å–∏–≤–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –æ—Ç–≤–µ—Ç

> –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Read Committed –∏ Repeatable Read ‚Äî  
> **–≤ –º–æ–º–µ–Ω—Ç–µ —Ñ–∏–∫—Å–∞—Ü–∏–∏ snapshot-–∞**:  
> –ø–µ—Ä–≤—ã–π ‚Äî ¬´–∂–∏–≤—ë—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏¬ª, –≤—Ç–æ—Ä–æ–π ‚Äî ¬´–∑–∞–º–æ—Ä–∞–∂–∏–≤–∞–µ—Ç –∫–∞—Ä—Ç–∏–Ω—É –º–∏—Ä–∞¬ª.
> 
> –í –¢-–ë–∞–Ω–∫–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º Repeatable Read –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ä–∞—Å—á—ë—Ç–æ–≤ –∏ –æ—Ç—á—ë—Ç–æ–≤,  
> –≥–¥–µ –∫—Ä–∏—Ç–∏—á–Ω–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö,  
> –∞ Read Committed ‚Äî –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, –≥–¥–µ –≤–∞–∂–Ω–µ–µ –≤–∏–¥–µ—Ç—å —Å–≤–µ–∂–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è.