Circuit Breaker (переключатель цепи) — это паттерн, используемый для повышения устойчивости распределённых систем и предотвращения цепных отказов. Он помогает контролировать и изолировать неисправные компоненты или сервисы, чтобы сбой в одном из них не привёл к сбоям в других частях системы. Работает аналогично “Выбитым пробкам” дома.  
  
Как работает Circuit Breaker:  
Circuit Breaker можно представить как переключатель с тремя основными состояниями:  
* Closed (Замкнут): В нормальном состоянии Circuit Breaker пропускает запросы. Если возникают ошибки (например, сервис не отвечает), он начинает фиксировать их количество.  
* Open (Открыт): Если количество ошибок превышает определённый порог за заданный период, Circuit Breaker "размыкается", блокируя дальнейшие запросы к этому сервису на некоторое время. В это время запросы сразу отклоняются или перенаправляются на резервный ресурс, не достигая неисправного сервиса.  
* Half-Open (Полуоткрыт): После тайм-аута Circuit Breaker переходит в режим "полуоткрытого" состояния и отправляет несколько тестовых запросов к сервису. Если тестовые запросы успешны, он возвращается в "замкнутое" состояние, и сервис считается восстановленным. Если тестовые запросы продолжают завершаться с ошибками, Circuit Breaker снова переходит в "открытое" состояние.  
  
Применение:  
Circuit Breaker защищает систему от чрезмерной нагрузки на неисправные или медленно работающие сервисы.  
Помогает избежать истощения ресурсов и деградации системы, повышая её отказоустойчивость.  
Используется в микросервисных архитектурах, когда один сервис зависит от других, чтобы предотвратить лавинообразный сбой.  
  
Пример:  
Представьте, что у вас есть сервис, обращающийся к базе данных, которая внезапно начинает тормозить. Если запросы продолжают посылаться, это может привести к истощению ресурсов и сбою других сервисов. Circuit Breaker размыкает цепь, предотвращая запросы к базе данных, пока она не восстановится, и защищает остальную систему от сбоев. Также Circuit Breaker может использоваться для прекращения обращения к внешним системам.