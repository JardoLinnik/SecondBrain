> **Unit of Work** ‚Äî —ç—Ç–æ –ø–∞—Ç—Ç–µ—Ä–Ω, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è **–∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –∫–∞–∫ —Å –µ–¥–∏–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–µ–π**.
> 
> –û–Ω —Å–ª–µ–¥–∏—Ç –∑–∞ –≤—Å–µ–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π –±–∏–∑–Ω–µ—Å-–æ–ø–µ—Ä–∞—Ü–∏–∏,  
> –∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ **–≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤–º–µ—Å—Ç–µ** ‚Äî –ª–∏–±–æ –≤—Å–µ –∫–æ–º–º–∏—Ç—è—Ç—Å—è, –ª–∏–±–æ –≤—Å–µ –æ—Ç–∫–∞—Ç—ã–≤–∞—é—Ç—Å—è.
> 
> –≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –ø–æ–º–æ–≥–∞–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å ‚Äú–≥—Ä—è–∑–Ω—ã—Ö‚Äù –¥–∞–Ω–Ω—ã—Ö –∏ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ —á–∏—â–µ, –æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å ORM ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, SQLAlchemy –∏–ª–∏ Django ORM.

---

## üîπ –°—É—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω–∞

- Unit of Work –±–µ—Ä—ë—Ç –Ω–∞ —Å–µ–±—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:
    
    - –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–º–∏ (dirty),
        
    - –Ω–æ–≤—ã–º–∏ (new),
        
    - –∏ —É–¥–∞–ª—ë–Ω–Ω—ã–º–∏ (deleted) –æ–±—ä–µ–∫—Ç–∞–º–∏.
        
- –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ –≤—ã–∑—ã–≤–∞–µ—Ç **–æ–¥–∏–Ω –∫–æ–º–º–∏—Ç** –≤ –∫–æ–Ω—Ü–µ, –∞ –Ω–µ –ø–æ —Ö–æ–¥—É –æ–ø–µ—Ä–∞—Ü–∏–π.
    
- –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫ ‚Äî –¥–µ–ª–∞–µ—Ç **rollback**, –æ—Ç–º–µ–Ω—è—è –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è.
    

---

### üìä –ü—Ä–∏–º–µ—Ä –∏–∑ –¢-–ë–∞–Ω–∫–∞

> –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ –¢-–ë–∞–Ω–∫–µ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞—è–≤–∫–∏ –Ω–∞ –∫—Ä–µ–¥–∏—Ç —è –º–æ–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Unit of Work,  
> —á—Ç–æ–±—ã –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –±–∏–∑–Ω–µ—Å-–¥–µ–π—Å—Ç–≤–∏—è (—Å–æ–∑–¥–∞–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞, —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞—è–≤–∫–∏, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è)  
> –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø–∏—Å—ã–≤–∞–ª–∏—Å—å **–≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**.
> 
> –ï—Å–ª–∏ –Ω–∞ –ª—é–±–æ–º —à–∞–≥–µ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–∫–æ—Ä–∏–Ω–≥ –Ω–µ –ø—Ä–æ—à—ë–ª),  
> –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç–∫–∞—Ç—ã–≤–∞—é—Ç—Å—è ‚Äî –∫–ª–∏–µ–Ω—Ç –Ω–µ –±—É–¥–µ—Ç ‚Äú–Ω–∞–ø–æ–ª–æ–≤–∏–Ω—É —Å–æ–∑–¥–∞–Ω‚Äù.

---

## üîπ –ü—Ä–∏–º–µ—Ä –Ω–∞ Python (SQLAlchemy)

`from sqlalchemy.orm import Session from models import Client, Application  class UnitOfWork:     def __init__(self, session_factory):         self.session_factory = session_factory      def __enter__(self):         self.session: Session = self.session_factory()         return self      def __exit__(self, exc_type, exc_val, exc_tb):         if exc_type:             self.session.rollback()         else:             self.session.commit()         self.session.close()  # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ def create_application(uow: UnitOfWork, client_data, app_data):     with uow as work:         client = Client(**client_data)         app = Application(**app_data, client=client)         work.session.add_all([client, app])`

üß© –í —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è **–æ–¥–Ω–∏–º –∫–æ–º–º–∏—Ç–æ–º**.  
–ï—Å–ª–∏ –≤—ã–±—Ä–æ—Å–∏—Ç—Å—è –∏—Å–∫–ª—é—á–µ–Ω–∏–µ, –≤—Å—ë –æ—Ç–∫–∞—Ç–∏—Ç—Å—è.

---

## üîπ –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ

- ‚úÖ **–¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö** ‚Äî –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∞—Ç–æ–º–∞—Ä–Ω—ã.
    
- ‚úÖ **–ò–∑–æ–ª—è—Ü–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏** ‚Äî —Å–µ—Ä–≤–∏—Å –Ω–µ –¥—É–º–∞–µ—Ç –æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö.
    
- ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** ‚Äî –Ω–µ –¥–µ–ª–∞–µ—Ç –¥–µ—Å—è—Ç–∫–∏ `commit()`, –∞ –æ–¥–∏–Ω.
    
- ‚úÖ **–£–¥–æ–±–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è** ‚Äî –º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç—ã–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–∞.
    

---

## üîπ –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –¢-–ë–∞–Ω–∫–µ

> –í –¢-–ë–∞–Ω–∫–µ Unit of Work –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤–µ–∑–¥–µ, –≥–¥–µ –µ—Å—Ç—å —Å–ª–æ–∂–Ω–∞—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü.
> 
> –ù–∞–ø—Ä–∏–º–µ—Ä:
> 
> - –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ **–Ω–æ–≤–æ–π –∫–∞—Ä—Ç—ã –∫–ª–∏–µ–Ω—Ç–∞** (—Ç–∞–±–ª–∏—Ü—ã `client`, `account`, `card`, `history`);
>     
> - –≤ **–∞–Ω—Ç–∏—Ñ—Ä–æ–¥–µ**, –≥–¥–µ –∑–∞ –æ–¥–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏–π –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏;
>     
> - –≤ **–ø–ª–∞—Ç—ë–∂–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö**, –≥–¥–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ ‚Äú–ø–æ–ª–æ–≤–∏–Ω–Ω—ã—Ö‚Äù —Å–æ—Å—Ç–æ—è–Ω–∏–π.
>     

üß∞ **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**  
`Python`, `SQLAlchemy`, `FastAPI`, `PostgreSQL`, `Alembic`, `Airflow` (–≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö DAG-level UoW)

---

## üîπ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

|–ü–∞—Ç—Ç–µ—Ä–Ω|–†–æ–ª—å|
|---|---|
|**Repository**|–∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –ë–î (CRUD)|
|**Unit of Work**|—É–ø—Ä–∞–≤–ª—è–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ –ø–æ–≤–µ—Ä—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤|
|**Service Layer**|–æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –±–∏–∑–Ω–µ—Å-–æ–ø–µ—Ä–∞—Ü–∏–∏, –≤—ã–∑—ã–≤–∞—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —á–µ—Ä–µ–∑ UoW|

–û–±—ã—á–Ω–æ —ç—Ç–∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã **–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–º–µ—Å—Ç–µ**:  
`Service ‚Üí UnitOfWork ‚Üí Repositories ‚Üí DB`.

---

## üí¨ –ö–∞–∫ –∫—Ä–∞—Å–∏–≤–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –æ—Ç–≤–µ—Ç

> –í —Ü–µ–ª–æ–º, Unit of Work –ø–æ–º–æ–≥–∞–µ—Ç —Å–¥–µ–ª–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö **–Ω–∞–¥—ë–∂–Ω–æ–π –∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–π**.  
> –í –¢-–ë–∞–Ω–∫–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, –≥–¥–µ –Ω—É–∂–Ω–æ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å:  
> –ª–∏–±–æ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å—ë, –ª–∏–±–æ –Ω–∏—á–µ–≥–æ.
> 
> –≠—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º–∏ –¥–µ–Ω—å–≥–∞–º–∏ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ ‚Äî  
> –∫–æ–≥–¥–∞ –æ—à–∏–±–∫–∞ –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º–∞.