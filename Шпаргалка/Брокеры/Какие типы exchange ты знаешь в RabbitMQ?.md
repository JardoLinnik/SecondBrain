> –í RabbitMQ exchange ‚Äî —ç—Ç–æ —Ç–æ—á–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π.  
> Producer –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ –≤ –æ—á–µ—Ä–µ–¥—å, –∞ –≤ exchange,  
> –∞ —Ç–æ—Ç —É–∂–µ —Ä–µ—à–∞–µ—Ç, **–≤ –∫–∞–∫–∏–µ –æ—á–µ—Ä–µ–¥–∏** –µ–≥–æ –¥–æ—Å—Ç–∞–≤–∏—Ç—å ‚Äî –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç **—Ç–∏–ø–∞ exchange** –∏ **routing key**.
> 
> –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã exchange ‚Äî —ç—Ç–æ **direct**, **topic**, **fanout**, **headers** –∏, –Ω–∞—á–∏–Ω–∞—è —Å –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –≤–µ—Ä—Å–∏–π, **default / consistent-hash / delayed**.
> 
> –í –¢-–ë–∞–Ω–∫–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏—Ö –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–∞–¥–∞—á–∏:  
> `direct` ‚Äî –¥–ª—è —Å–æ–±—ã—Ç–∏–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª—é,  
> `topic` ‚Äî –¥–ª—è –±–∏–∑–Ω–µ—Å-—Å–æ–±—ã—Ç–∏–π (`transaction.created`, `client.updated.*`),  
> `fanout` ‚Äî –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏ –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–π –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Å–µ—Ä–≤–∏—Å–∞–º,  
> `headers` ‚Äî –≤ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è—Ö, –≥–¥–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º.

---

## üîπ 1. **Direct Exchange** ‚Äî ‚Äú–ø–æ —Ç–æ—á–Ω–æ–º—É –∫–ª—é—á—É‚Äù

üì¶ **–°–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –æ—á–µ—Ä–µ–¥—å, —á–µ–π `routing_key` —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –ø—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏.**

üîß –ü—Ä–∏–º–µ—Ä:

```
# –û—á–µ—Ä–µ–¥—å —Å–≤—è–∑–∞–Ω–∞ —Å –∫–ª—é—á–æ–º 'email'
channel.queue_bind(exchange='direct_ex', queue='email_queue', routing_key='email')

# –û—Ç–ø—Ä–∞–≤–∫–∞
channel.basic_publish(exchange='direct_ex', routing_key='email', body='Send email to client')

```

üìç **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**

- –ß—ë—Ç–∫–æ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ: 1 producer ‚Üí 1 consumer.
    
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Ç–∏–ø—É –∑–∞–¥–∞—á: `email`, `sms`, `push`.
    

üß† _–í –¢-–ë–∞–Ω–∫–µ:_ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á (email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, push-—Ä–∞—Å—Å—ã–ª–∫–∏).

---

## üîπ 2. **Topic Exchange** ‚Äî ‚Äú–ø–æ —à–∞–±–ª–æ–Ω—É –∫–ª—é—á–∞‚Äù

üì¶ **Routing key ‚Äî —ç—Ç–æ —Å—Ç—Ä–æ–∫–∞ —Å —Å–µ–≥–º–µ–Ω—Ç–∞–º–∏ —á–µ—Ä–µ–∑ —Ç–æ—á–∫–∏** (`.`),  
–∞ –ø—Ä–∏ –±–∏–Ω–¥–∏–Ω–≥–µ –æ—á–µ—Ä–µ–¥–∏ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—à–∞–±–ª–æ–Ω—ã**:

- `*` ‚Äî –æ–¥–∏–Ω —Å–µ–≥–º–µ–Ω—Ç
    
- `#` ‚Äî –ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ–≥–º–µ–Ω—Ç–æ–≤
    

üîß –ü—Ä–∏–º–µ—Ä:

```
# –û—á–µ—Ä–µ–¥—å –ø–æ–¥–ø–∏—Å–∞–Ω–∞ –Ω–∞ –≤—Å–µ —Å–æ–±—ã—Ç–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤
channel.queue_bind(exchange='topic_ex', queue='client_update_queue', routing_key='client.update.#')

# –ü—É–±–ª–∏–∫–∞—Ü–∏—è
channel.basic_publish(exchange='topic_ex', routing_key='client.update.profile', body='Profile updated')

```

üìç **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**

- –ë–∏–∑–Ω–µ—Å-—Å–æ–±—ã—Ç–∏—è: `transaction.created`, `transaction.failed`, `client.updated.name`.
    
- –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è —Å–æ–±—ã—Ç–∏–π–Ω–∞—è —à–∏–Ω–∞.
    
- –õ–µ–≥–∫–æ –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –Ω–∞ –Ω—É–∂–Ω—ã–µ —Ç–µ–º—ã.
    

üß† _–í –¢-–ë–∞–Ω–∫–µ:_ Topic exchange ‚Äî –æ—Å–Ω–æ–≤–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã:  
–≤—Å–µ —Å–æ–±—ã—Ç–∏—è (`transaction.*`, `client.*`, `card.*`) –∏–¥—É—Ç —á–µ—Ä–µ–∑ `topic`-exchange —Å —à–∞–±–ª–æ–Ω–∞–º–∏ –ø–æ–¥–ø–∏—Å–æ–∫.

---

## üîπ 3. **Fanout Exchange** ‚Äî ‚Äú–≤—Å–µ–º —Å—Ä–∞–∑—É‚Äù

üì¶ **–°–æ–æ–±—â–µ–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤–æ –≤—Å–µ –æ—á–µ—Ä–µ–¥–∏, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∫ —ç—Ç–æ–º—É exchange**,  
–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç routing key.

üîß –ü—Ä–∏–º–µ—Ä:

```
channel.queue_bind(exchange='fanout_ex', queue='log_queue')
channel.queue_bind(exchange='fanout_ex', queue='analytics_queue')

channel.basic_publish(exchange='fanout_ex', routing_key='', body='New transaction event')

```

üìç **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**

- –®–∏—Ä–æ–∫–æ–≤–µ—â–∞—Ç–µ–ª—å–Ω–∞—è —Ä–∞—Å—Å—ã–ª–∫–∞: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥.
    
- –ù–µ—Å–∫–æ–ª—å–∫–æ —Å–∏—Å—Ç–µ–º —Å–ª—É—à–∞—é—Ç –æ–¥–Ω–æ —Å–æ–±—ã—Ç–∏–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ.
    

üß† _–í –¢-–ë–∞–Ω–∫–µ:_ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞—Å—Å—ã–ª–∫–∏ –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–π —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —Å–µ—Ä–≤–∏—Å–∞–º (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –∞—É–¥–∏—Ç, –∞–Ω–∞–ª–∏—Ç–∏–∫–∞).

---

## üîπ 4. **Headers Exchange** ‚Äî ‚Äú–ø–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º‚Äù

üì¶ **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –Ω–µ –ø–æ routing_key, –∞ –ø–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º** —Å–æ–æ–±—â–µ–Ω–∏—è (`headers`).  
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `x-match: any` –∏–ª–∏ `x-match: all`.

üîß –ü—Ä–∏–º–µ—Ä:

```
args = {'x-match': 'all', 'type': 'pdf', 'env': 'prod'}
channel.queue_bind(exchange='headers_ex', queue='doc_queue', arguments=args)

# –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏
props = pika.BasicProperties(headers={'type': 'pdf', 'env': 'prod'})
channel.basic_publish(exchange='headers_ex', routing_key='', properties=props, body='Document ready')

```

üìç **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**

- –ö–æ–≥–¥–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–ª–æ–∂–Ω–µ–µ, —á–µ–º –æ–¥–∏–Ω –∫–ª—é—á.
    
- –ù–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç—á—ë—Ç—ã —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∏ –æ–∫—Ä—É–∂–µ–Ω–∏–π.
    

üß† _–í –¢-–ë–∞–Ω–∫–µ:_ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö, –≥–¥–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–¥—É—Ç —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (—Ç–∏–ø –∫–ª–∏–µ–Ω—Ç–∞, —Ä–µ–≥–∏–æ–Ω, –∫–∞–Ω–∞–ª –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏).

---

## üîπ 5. **Default Exchange** ‚Äî ‚Äú–ø—Ä—è–º–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –≤ –æ—á–µ—Ä–µ–¥—å‚Äù

üì¶ –≠—Ç–æ ‚Äú—Å–∫—Ä—ã—Ç—ã–π‚Äù `direct`-exchange –±–µ–∑ –∏–º–µ–Ω–∏ (`""`).  
–ï—Å–ª–∏ —Ç—ã –ø—É–±–ª–∏–∫—É–µ—à—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Å `routing_key`, —Å–æ–≤–ø–∞–¥–∞—é—â–∏–º —Å –∏–º–µ–Ω–µ–º –æ—á–µ—Ä–µ–¥–∏ ‚Äî –æ–Ω–æ —Å—Ä–∞–∑—É —Ç—É–¥–∞ –ø–æ–ø–∞–¥—ë—Ç.

üîß –ü—Ä–∏–º–µ—Ä:

`channel.basic_publish(exchange='', routing_key='queue_name', body='simple msg')`

üìç **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:**

- –ü—Ä–æ—Å—Ç—ã–µ –æ—á–µ—Ä–µ–¥–∏ –±–µ–∑ —Å–ª–æ–∂–Ω–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ (—á–∞—â–µ ‚Äî –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –≤ —Ç–µ—Å—Ç–∞—Ö).
    

---

## üîπ 6. **(–ù–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–µ, –Ω–æ –ø–æ–ª–µ–∑–Ω—ã–µ) ‚Äî Delayed –∏ Consistent-hash exchanges**

- üïì **Delayed Exchange** ‚Äî –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–ª–æ–∂–∏—Ç—å –¥–æ—Å—Ç–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π (`x-delay` –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥).  
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è **retry** –∏ **backoff** –º–µ—Ö–∞–Ω–∏–∫.
    
    üìç _–í –¢-–ë–∞–Ω–∫–µ:_ –¥–ª—è —Ä–µ—Ç—Ä–∞–µ–≤ –Ω–µ—É–¥–∞–≤—à–∏—Ö—Å—è –ø–ª–∞—Ç–µ–∂–µ–π ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø—É–±–ª–∏–∫—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ 30 —Å–µ–∫ / 1 –º–∏–Ω / 5 –º–∏–Ω.
    
- ‚öñÔ∏è **Consistent Hash Exchange** ‚Äî —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ –æ—á–µ—Ä–µ–¥—è–º –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ö—ç—à-—Ñ—É–Ω–∫—Ü–∏–∏ –∫–ª—é—á–∞.  
    –£–¥–æ–±–Ω–æ –¥–ª—è –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –Ω–∞–≥—Ä—É–∑–∫–∏.
    

---

## üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞

|–¢–∏–ø exchange|–ö–ª—é—á –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏|–ö–æ–º—É –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è|–¢–∏–ø–∏—á–Ω—ã–µ –∫–µ–π—Å—ã|
|---|---|---|---|
|**direct**|–¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –∫–ª—é—á–∞|–û–¥–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏|–û—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á (`email`, `sms`)|
|**topic**|–®–∞–±–ª–æ–Ω (`*`, `#`)|–í—Å–µ–º –ø–æ–¥—Ö–æ–¥—è—â–∏–º –æ—á–µ—Ä–µ–¥—è–º|–°–æ–±—ã—Ç–∏—è (`client.update.*`)|
|**fanout**|–ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è|–í—Å–µ–º —Å–≤—è–∑–∞–Ω–Ω—ã–º –æ—á–µ—Ä–µ–¥—è–º|–®–∏—Ä–æ–∫–æ–≤–µ—â–∞–Ω–∏–µ (`audit`, `monitoring`)|
|**headers**|–ü–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º|–ü–æ —É—Å–ª–æ–≤–∏—è–º (`x-match`)|–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º|
|**default**|–ò–º—è –æ—á–µ—Ä–µ–¥–∏|–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏|–ü—Ä–æ—Å—Ç—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏|
|**delayed**|–õ—é–±–æ–π|–ü–æ—Å–ª–µ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏|–†–µ—Ç—Ä–∞–∏, –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏|

---

## üí¨ –ö–∞–∫ –∫—Ä–∞—Å–∏–≤–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –æ—Ç–≤–µ—Ç

> –í —Ü–µ–ª–æ–º, —Ä–∞–∑–Ω—ã–µ exchange-—Ç–∏–ø—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –≤—ã–±–∏—Ä–∞—Ç—å –º–µ–∂–¥—É **–ø—Ä–æ—Å—Ç–æ—Ç–æ–π (direct)**, **–º–∞—Å—Å–æ–≤–æ–π —Ä–∞—Å—Å—ã–ª–∫–æ–π (fanout)** –∏ **–≥–∏–±–∫–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π (topic / headers)**.
> 
> –í –¢-–ë–∞–Ω–∫–µ –º—ã –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º `topic` –¥–ª—è –±–∏–∑–Ω–µ—Å-—Å–æ–±—ã—Ç–∏–π –∏ `fanout` –¥–ª—è —Ä–∞—Å—Å—ã–ª–æ–∫ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è,  
> `direct` ‚Äî –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö job-–æ—á–µ—Ä–µ–¥–µ–π, –∞ `delayed` ‚Äî –¥–ª—è —Ä–µ—Ç—Ä–∞–µ–≤ –∏ –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.
> 
> –¢–∞–∫–∞—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ—Ç–æ–∫–∞–º–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É.