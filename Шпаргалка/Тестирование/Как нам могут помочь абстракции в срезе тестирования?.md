В контексте тестирования абстракции дают возможность изолировать тестируемую логику от внешних или сложных зависимостей (БД, сети, файловой системы), позволяя подменять эти зависимости моками, стабами, фейками и т.д. Также круто применять Dependency Injection.  
  
1. Зачем нужны абстракции в тестировании  
* Изоляция тестируемой логики  
- Если ваш метод/класс/компонент сильно завязан на внешние системы (запросы в БД, HTTP, кэш, и т.п.), то тесты становятся громоздкими, зависимыми от окружения и медленными.  
- Правильно введённая абстракция (например, интерфейс IUserRepository вместо прямого SQL-запроса) позволяет в тестах подменить реализацию «фейковой» или «инMemory»-версии.  
  
* Упрощение сценариев тестирования  
- С помощью подмен (mock, stub) можно точно контролировать поведение зависимой части.  
- Можно заранее «запрограммировать» ответы, ошибки, задержки, чтобы проверить, как система реагирует на различные условия.  
  
* Повышение скорости тестов  
- «Лёгкие» зависимости (инMemory, стабы) работают гораздо быстрее, чем реальные I/O или сервисы.  
- Это ускоряет CI/CD и повышает частоту запуска тестов (ранняя обратная связь).  
  
2. Как абстракции влияют на код  
* Снижают связность  
* Модули перестают напрямую зависеть от конкретной реализации.  
  
3.«Качественное» выделение абстракций: ключевые принципы  
* Соблюдать SRP (Single Responsibility Principle)  
- Не смешивать в одном классе (или модуле) бизнес-логику и детали инфраструктуры (доступ к файлам, сети).  
- Каждая часть должна иметь «одну ответственность» — тогда интерфейсы получаются естественными.  
* Избегать «преждевременной» абстракции  
- Если у вас небольшой проект и одна БД, возможно не нужно создавать 5 уровней абстракций.  
- Хороший индикатор для ввода абстракций — наличие двух и более реализаций (или чёткое понимание, что скоро их будет несколько).  
  
* Читаемость и простота важнее «всё абстрагировать»  
- Слишком агрессивное применение DI и абстракций может усложнить код (Многоуровневая иерархия интерфейсов, фабрик, конфигов).  
- Держите баланс: абстракции там, где они действительно помогают тестировать и расширять код без боли.  
  
* Документировать контракты  
- Если у вас есть интерфейс IUserRepository, его обязанности должны быть чётко описаны (например, в docstring или комментариях).  
- Это помогает и при написании тестов (понимаем, что мы ожидаем), и при разработке альтернативных реализаций.