> **Event-driven logging** ‚Äî —ç—Ç–æ –ø–æ–¥—Ö–æ–¥, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –ª–æ–≥–∏ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è **–∫–∞–∫ —Å–æ–±—ã—Ç–∏—è**, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ –∫–∞–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏.
> 
> –¢–æ –µ—Å—Ç—å –∫–∞–∂–¥—ã–π –ª–æ–≥ ‚Äî —ç—Ç–æ **—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º** (`timestamp`, `service`, `trace_id`, `event_type`, `payload`),  
> –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç –±—ã—Ç—å **–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π (Kafka, RabbitMQ)** –∏–ª–∏ —Å–∏—Å—Ç–µ–º—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (Loki, ELK, ClickHouse) –∏ –ø–æ—Ç–æ–º **—Ä–µ–∞–∫—Ç–∏–≤–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ**: –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–æ, –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ, –≤—ã–∑–≤–∞–ª–æ –∞–ª–µ—Ä—Ç –∏–ª–∏ –¥–∞—à–±–æ—Ä–¥.
> 
> –í –¢-–ë–∞–Ω–∫–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —ç—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –¥–ª—è –±–∏–∑–Ω–µ—Å-–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π: –≤—Å—ë, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Å–∏—Å—Ç–µ–º–µ ‚Äî —ç—Ç–æ event, –∏ –ª–æ–≥–∏ ‚Äî –ø—Ä–æ—Å—Ç–æ –µ—â—ë –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ —ç—Ç–∏—Ö —Å–æ–±—ã—Ç–∏–π.

---

## üîπ –ò–¥–µ—è –ø—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏

–û–±—ã—á–Ω–æ –ª–æ–≥ = –ø—Ä–æ—Å—Ç–æ —Ç–µ–∫—Å—Ç –≤ stdout:

`[INFO] payment succeeded user=123`

Event-driven logging –¥–µ–ª–∞–µ—Ç –∏–∑ —ç—Ç–æ–≥–æ **—Å–æ–±—ã—Ç–∏–µ**:

```
{
  "timestamp": "2025-11-08T12:01:22Z",
  "event_type": "payment.succeeded",
  "user_id": 123,
  "amount": 1000,
  "trace_id": "a1b2c3",
  "service": "payments-api"
}

```
–¢–∞–∫–æ–π –ª–æ–≥ –º–æ–∂–Ω–æ –Ω–µ —Ç–æ–ª—å–∫–æ ‚Äú—á–∏—Ç–∞—Ç—å –≥–ª–∞–∑–∞–º–∏‚Äù, –Ω–æ –∏:

- üìä –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ **Kafka topic** ‚Üí —Å–ª—É—à–∞—Ç—å —Å–µ—Ä–≤–∏—Å–∞–º–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏;
    
- üö® –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ–Ω—Å—å—é–º–µ—Ä–æ–º ‚Üí —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –º–µ—Ç—Ä–∏–∫—É, —Ç—Ä–∏–≥–≥–µ—Ä–∏—Ç—å –∞–ª–µ—Ä—Ç;
    
- üîÅ —Ä–µ–ø–ª–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –≤ **Loki / ClickHouse / BigQuery** –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏;
    
- ‚ö° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–ª—è real-time –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.
    

---

## üîπ –ü—Ä–∏–º–µ—Ä –∏–∑ —Ç–≤–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ (–¢-–ë–∞–Ω–∫)

> –í –¢-–ë–∞–Ω–∫–µ —É –Ω–∞—Å –ø–æ—á—Ç–∏ –≤—Å—ë ‚Äî **event-driven**: —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –∞–Ω—Ç–∏—Ñ—Ä–æ–¥, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.
> 
> –ö–æ–≥–¥–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç `transaction.created`, —Å–µ—Ä–≤–∏—Å –ø—É–±–ª–∏–∫—É–µ—Ç **–±–∏–∑–Ω–µ—Å-—Å–æ–±—ã—Ç–∏–µ** –≤ Kafka –∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –ø–∏—à–µ—Ç **—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Å–æ–±—ã—Ç–∏–µ-–ª–æ–≥** –≤ JSON, –≥–¥–µ –µ—Å—Ç—å `event_type`, `trace_id`, `status`, `latency`.
> 
> –≠—Ç–∏ —Å–æ–±—ã—Ç–∏—è –∞–≥—Ä–µ–≥–∏—Ä—É—é—Ç—Å—è –≤ Kafka-—Ç–æ–ø–∏–∫–∞—Ö, –∏ —Å–µ—Ä–≤–∏—Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å—Ç—Ä–æ–∏—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É ‚Äî latency, error-rate, SLA.
> 
> –≠—Ç–æ –∏ –µ—Å—Ç—å event-driven logging ‚Äî –∫–æ–≥–¥–∞ –ª–æ–≥ ‚Äî –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ç–µ–∫—Å—Ç, –∞ —ç–ª–µ–º–µ–Ω—Ç –ø–æ—Ç–æ–∫–∞ —Å–æ–±—ã—Ç–∏–π –≤ —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ.

---

## üîπ –ß–µ–º event-driven logging –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –æ–±—ã—á–Ω–æ–≥–æ

|–ü–æ–¥—Ö–æ–¥|–ß—Ç–æ —ç—Ç–æ|–ú–∏–Ω—É—Å—ã / –ü–ª—é—Å—ã|
|---|---|---|
|üßæ **–û–±—ã—á–Ω—ã–π logging**|–¢–µ–∫—Å—Ç–æ–≤–∞—è —Å—Ç—Ä–æ–∫–∞ –≤ stdout|–õ–µ–≥–∫–æ —á–∏—Ç–∞—Ç—å, —Å–ª–æ–∂–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å|
|‚öôÔ∏è **Event-driven logging**|–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ (JSON) —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏|–ú–æ–∂–Ω–æ –ø–∞—Ä—Å–∏—Ç—å, —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å, –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞—Ç—å, —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å|

---

## üîπ –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è

- üì° **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** ‚Äî –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã —à–ª—é—Ç —Å–æ–±—ã—Ç–∏—è –≤ Kafka, –≤ —Ç–æ–º —á–∏—Å–ª–µ ‚Äú–ª–æ–≥–æ–≤—ã–µ‚Äù.
    
- üìà **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç–∏–Ω–≥** ‚Äî —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Å–æ–±—ã—Ç–∏—è (`error`, `timeout`, `retry`) —Ñ–æ—Ä–º–∏—Ä—É—é—Ç –º–µ—Ç—Ä–∏–∫–∏.
    
- üí¨ **–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞** ‚Äî —Å–æ–±—ã—Ç–∏—è –ª–æ–≥–æ–≤ –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ real-time –æ—Ç—á—ë—Ç—ã.
    
- üîç **Observability** ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ª–æ–≥–æ–≤ —Å —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–æ–π (`trace_id`) –∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏.
    

---

## üîπ –ü—Ä–∏–º–µ—Ä –≤ –∫–æ–¥–µ

```
import json, time
from kafka import KafkaProducer

producer = KafkaProducer(bootstrap_servers=["kafka:9092"],
                         value_serializer=lambda v: json.dumps(v).encode())

def log_event(event_type, **kwargs):
    event = {
        "timestamp": time.strftime("%Y-%m-%dT%H:%M:%SZ"),
        "service": "payments-api",
        "event_type": event_type,
        "trace_id": kwargs.get("trace_id"),
        "level": kwargs.get("level", "INFO"),
        "payload": kwargs
    }
    producer.send("logs.tech", event)
    print(json.dumps(event))  # stdout ‚Üí Loki

```

üìò _–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Å–∞—Ç—å –ª–æ–≥ –∏ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –µ–≥–æ –∫–∞–∫ event –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ._

---

## üí¨ –ö–∞–∫ –∫—Ä–∞—Å–∏–≤–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –æ—Ç–≤–µ—Ç

> –ï—Å–ª–∏ –∫–æ—Ä–æ—Ç–∫–æ ‚Äî **event-driven logging** –¥–µ–ª–∞–µ—Ç –ª–æ–≥–∏ —á–∞—Å—Ç—å—é –æ–±—â–µ–π —Å–æ–±—ã—Ç–∏–π–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.
> 
> –≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ç–µ–∫—Å—Ç, –∞ –ø–æ—Ç–æ–∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å, –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞—Ç—å –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∞–ª–µ—Ä—Ç–∏–Ω–≥–∞ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏.
> 
> –í –¢-–ë–∞–Ω–∫–µ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —ç—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –ø–æ–≤—Å–µ–º–µ—Å—Ç–Ω–æ ‚Äî –ª–æ–≥–∏, –º–µ—Ç—Ä–∏–∫–∏ –∏ –±–∏–∑–Ω–µ—Å-—Å–æ–±—ã—Ç–∏—è –∂–∏–≤—É—Ç –≤ –æ–¥–Ω–æ–º —Å–æ–±—ã—Ç–∏–π–Ω–æ–º –∫–æ–Ω—Ç—É—Ä–µ.