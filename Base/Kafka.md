[[Брокер сообщений]]  - самое популяное решние на сегодняшний день.

Отличия kafka:
- Наличие топиков
- Гарантии доставки сообщений.
- Хранение данных на жестком диске.
- Масштабирование и partition

Topic - тема сообщения. Канал сообщений определенного типа.

At most once (максимум один раз) - система Kafka не гарантирующая доставку сообщения. Необходима для большого обмена не важными данными. Например для аналитики. Producer не ждет ответа.

At least once (Как минимум один раз) - система гарантии kafka обеспечивающая дожождения данных.
Producer ждет acknowledgement(подтверждения) от брокера.
Данные могут дублировать и надо  настраивать фильтр дублкатов в каждом сервисе, тоесть делать их идемпотентными.

Кластер серверов Kafka - группа серверов одной и той же программы. Необходима для обеспечения безопасности и гарантии работы. Принцип [[Репликация]]

Partition - Каждый Topic поделен внутри на части, в которые случайно распределяются сообщения.  Увеличивает пропускную способность Topic. Потребления из Partition тоже случайно и может нарушаться прядок следования.
Можно сделать так чтобы какие то данные попадал в один и тот же partition постоянно, что обеспечит последовательное изьятие сообщений. Для этого на собшщение крепим ключ. Все сообщения с одинаковым ключом будут идти в один и тот же  Partition.

Можно разбрасывать Partition одного Topic на разные сервера кластера. Обеспечивая скорость и пропускную способность. При этом остаются копии которые не используются на сулчай Тыквы.

**Проблема**:

**Пример**:

**Доп. ссылки:** [[Брокер сообщений]] [[Идемпотентность]]

**Tags**: #Backend  #IT  #БрокерСообщений