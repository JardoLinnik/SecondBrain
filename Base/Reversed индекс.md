–≠—Ç–æ –∏–Ω–¥–µ–∫—Å, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç **–≤ –æ–±—Ä–∞—Ç–Ω—É—é —Å—Ç–æ—Ä–æ–Ω—É** –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –æ–±—ã—á–Ω—ã–º –∏–Ω–¥–µ–∫—Å–æ–º.

### –û–±—ã—á–Ω—ã–π –∏–Ω–¥–µ–∫—Å B-Tree:

`document_id ‚Üí —Å–ª–æ–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞`

### –û–±—Ä–∞—Ç–Ω—ã–π –∏–Ω–¥–µ–∫—Å (inverted index):

`—Å–ª–æ–≤–æ ‚Üí —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –≥–¥–µ –æ–Ω–æ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è`

–¢–æ –µ—Å—Ç—å –±–∞–∑–∞ —Ö—Ä–∞–Ω–∏—Ç:  
‚Äú–∫–∞–∫–æ–µ —Å–ª–æ–≤–æ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –≤ –∫–∞–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö‚Äù.

–ü—Ä–∏–º–µ—Ä:

|–î–æ–∫—É–º–µ–Ω—Ç|–¢–µ–∫—Å—Ç|
|---|---|
|1|"cat eats fish"|
|2|"dog eats bone"|
|3|"cat likes milk"|

–ò–Ω–¥–µ–∫—Å –±—É–¥–µ—Ç —Ç–∞–∫–∏–º:

`cat  ‚Üí [1,3] dog  ‚Üí [2] eats ‚Üí [1,2] fish ‚Üí [1] bone ‚Üí [2] likes‚Üí [3] milk ‚Üí [3]`

–≠—Ç–æ –∏ –µ—Å—Ç—å **reversed index**.

---

# üî• –ü–æ—á–µ–º—É —ç—Ç–æ –ø–æ–ª–µ–∑–Ω–æ?

–ü–æ—Ç–æ–º—É —á—Ç–æ –ø–æ–∏—Å–∫ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –±—ã—Å—Ç—Ä—ã–º.

–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:

`–Ω–∞–π–¥–∏ –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã, –≥–¥–µ –µ—Å—Ç—å —Å–ª–æ–≤–∞ "cat" –∏ "milk"`

–ü–æ–∏—Å–∫:

`cat  ‚Üí [1,3] milk ‚Üí [3]`

–ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤:

`[3]`

–ì–æ—Ç–æ–≤–æ ‚Äî –æ–¥–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–æ–≤.

---

# üß± –ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω reversed index –≤–Ω—É—Ç—Ä–∏?

–û–Ω —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö —á–∞—Å—Ç–µ–π:

## 1Ô∏è‚É£ –°–ª–æ–≤–∞—Ä—å (dictionary)

- –∫–∞–∂–¥–æ–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ —Å–ª–æ–≤–æ ‚Üí ID
    
- —á–∞—Å—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ
    
- –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ B-Tree, FST, trie
    

–ü—Ä–∏–º–µ—Ä:

`cat ‚Üí term_id=1 dog ‚Üí term_id=2 milk‚Üí term_id=3`

## 2Ô∏è‚É£ –ü–æ—Å—Ç–∏–Ω–≥-–ª–∏—Å—Ç—ã (posting lists)

–î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ–≤–∞ ‚Äî —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ + –ø–æ–∑–∏—Ü–∏–∏:

`term "cat":   doc1: pos [1]   doc3: pos [1]`

–û–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å:

- –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã
    
- —Å–∂–∞—Ç—ã (varint, bitpacking)
    
- —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –Ω–∞ –±–ª–æ–∫–∏
    

–≠—Ç–æ –ø–æ—Ö–æ–∂–∞—è –∏–¥–µ—è –Ω–∞ bitmap –∏–Ω–¥–µ–∫—Å—ã, –Ω–æ –¥–ª—è —Ç–µ–∫—Å—Ç–∞ –∏ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å–ª–æ–≤.

---

# üìå –ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è inverted index?

### 1. –ü–æ–∏—Å–∫–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã

Google, Bing, Elasticsearch, Solr ‚Äî **—Å–µ—Ä–¥—Ü–µ –ø–æ–∏—Å–∫–∞**.

### 2. –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –≤ SQL –±–∞–∑–∞—Ö:

- PostgreSQL (GIN)
    
- MySQL FULLTEXT
    
- SQLite FTS
    

### 3. NoSQL / –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–∏—Å—Ç–µ–º—ã:

- Elasticsearch
    
- OpenSearch
    
- Splunk
    
- ClickHouse (–¥–ª—è Search engines)
    
- Druid (segment index)
    

### 4. –õ–æ–≥-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞:

- Graylog
    
- Loki (—á–∞—Å—Ç–∏—á–Ω–æ)
    
- SIEM —Å–∏—Å—Ç–µ–º—ã
    

### 5. –ü–∞—Ä—Å–µ—Ä—ã –∏ NLP

---

# üß† –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ reversed –∏–Ω–¥–µ–∫—Å–∞

‚úî —ç–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ —Ç–µ–∫—Å—Ç—É  
‚úî –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (AND, OR, NOT)  
‚úî —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–µ–Ω –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö (–º–∏–ª–ª–∏–æ–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤)  
‚úî –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –ª–æ–≥–æ–≤, –ø–æ–∏—Å–∫–æ–≤–∏–∫–æ–≤, –∞–Ω–∞–ª–∏—Ç–∏–∫–∏  
‚úî –ª–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è

---

# ‚ö† –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏

‚ùå –∏–Ω–¥–µ–∫—Å –º–æ–∂–µ—Ç –±—ã—Ç—å _–æ—á–µ–Ω—å –±–æ–ª—å—à–∏–º_  
‚ùå –º–µ–¥–ª–µ–Ω–Ω—ã–π UPDATE/DELETE  
‚ùå –Ω—É–∂–Ω–æ –º–Ω–æ–≥–æ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ  
‚ùå –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è OLTP

–ü–æ—á–µ–º—É –º–µ–¥–ª–µ–Ω–Ω—ã–π UPDATE?

- –Ω—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å —Å–ª–æ–≤–æ –∏–∑ –≤—Å–µ—Ö posting lists
    
- —ç—Ç–æ –¥–æ—Ä–æ–≥–æ
    

–í –ø–æ–∏—Å–∫–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –≤–º–µ—Å—Ç–æ UPDATE ‚Üí –∏—Å–ø–æ–ª—å–∑—É—é—Ç append-only —Å–µ–≥–º–µ–Ω—Ç—ã –∏ merge.

---

# üîç –°—Ä–∞–≤–Ω–µ–Ω–∏–µ reversed index vs bitmap index

|–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å|Reversed index|Bitmap index|
|---|---|---|
|–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏–π|–û—á–µ–Ω—å –º–Ω–æ–≥–æ (—Å–ª–æ–≤–∞)|–ú–∞–ª–µ–Ω—å–∫–æ (enum, boolean)|
|–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è|–¢–µ–∫—Å—Ç|–ö–∞—Ç–µ–≥–æ—Ä–∏–∏, —Å—Ç–∞—Ç—É—Å—ã|
|–§–æ—Ä–º–∞—Ç|posting lists|–±–∏—Ç–æ–≤—ã–µ –º–∞—Å–∫–∏|
|–°–∫–æ—Ä–æ—Å—Ç—å AND/OR|–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è|–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è|
|–†–∞–∑–º–µ—Ä|–±–æ–ª—å—à–æ–π|–∫–æ–º–ø–∞–∫—Ç–Ω—ã–π|

---

# üéØ –ò—Ç–æ–≥

**Reversed (inverted) –∏–Ω–¥–µ–∫—Å ‚Äî —ç—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–∞–∂–¥–æ–µ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ —Å–ª–æ–≤–æ —Å–æ —Å–ø–∏—Å–∫–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –≥–¥–µ –æ–Ω–æ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è.**

–ò–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É:

üìå –ø–æ–∏—Å–∫–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ  
üìå –ª–æ–≥-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –±—ã—Å—Ç—Ä–æ –∏—â–µ—Ç –ø–æ —Ç–µ–∫—Å—Ç—É  
üìå PostgreSQL GIN –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–æ–∏—Å–∫ –ø–æ JSONB –∏ —Ç–µ–∫—Å—Ç—É  
üìå Elasticsearch –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –º–∏–ª–ª–∏–∞—Ä–¥—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

–≠—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞.

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**:

**–ü—Ä–∏–º–µ—Ä**:

**–î–æ–ø. —Å—Å—ã–ª–∫–∏:**
[[–ò–Ω–¥–µ–∫—Å—ã]]

**Tags**: #IT #Backend  #–ë–∞–∑–∞–î–∞–Ω–Ω—ã—Ö 