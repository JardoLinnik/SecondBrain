–û–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –ø–æ–¥ **–∞–Ω–∞–ª–∏—Ç–∏–∫—É, –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏ —á—Ç–µ–Ω–∏–µ –±–æ–ª—å—à–∏—Ö –æ–±—ä—ë–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö**, –Ω–æ –Ω–µ –ø–æ–¥ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏. –ö–∞–∂–¥—É—é –∫–æ–ª–æ–Ω–∫—É –º–æ–∂–Ω–æ –≤—ã–Ω–æ—Å–∏—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–∏–ª.

# –î–ª—è —á–µ–≥–æ —ç—Ç–æ –Ω—É–∂–Ω–æ

### ‚úî 1. –ë—ã—Å—Ç—Ä–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

–ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å —Ç–∏–ø–∞:

`SELECT AVG(price) FROM sales WHERE country = 'US';`

–ö–æ–ª–æ–Ω–æ—á–Ω–∞—è –ë–î:

- —á–∏—Ç–∞–µ—Ç **—Ç–æ–ª—å–∫–æ –∫–æ–ª–æ–Ω–∫—É price**
    
- –ø–ª—é—Å –∫–æ–ª–æ–Ω–∫—É country –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
    
- –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ
    

–°—Ç—Ä–æ–∫–æ–≤–∞—è:

- —á–∏—Ç–∞–µ—Ç **–≤—Å–µ —Å—Ç—Ä–æ–∫–∏ —Ü–µ–ª–∏–∫–æ–º**
    

---

### ‚úî 2. –ò–¥–µ–∞–ª—å–Ω–æ–µ —Å–∂–∞—Ç–∏–µ

–û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∫–æ–ª–æ–Ω–∫–µ —Ö–æ—Ä–æ—à–æ –ø–∞—á–∫—É—é—Ç—Å—è.

–ü—Ä–∏–º–µ—Ä:

`country: US, US, US, US, US ‚Üí —Å–∂–∏–º–∞–µ—Ç—Å—è –¥–æ RLE age:     20, 20, 20, 20 ‚Üí –∏–¥–µ–∞–ª—å–Ω–æ —Å–∂–∏–º–∞–µ—Ç—Å—è`

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ:

- –¥–∏—Å–∫–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä –Ω–∞–º–Ω–æ–≥–æ –º–µ–Ω—å—à–µ
    
- I/O –≤ 10‚Äì100 —Ä–∞–∑ –º–µ–Ω—å—à–µ
    

---

### ‚úî 3. –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

–ö–æ–ª–æ–Ω–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–º –±–ª–æ–∫–µ –ø–∞–º—è—Ç–∏ ‚Üí CPU –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å SIMD-–æ–ø–µ—Ä–∞—Ü–∏–∏:

- —Å—É–º–º–∏—Ä–æ–≤–∞—Ç—å
    
- —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å
    
- –Ω–∞—Ö–æ–¥–∏—Ç—å –º–∞–∫—Å–∏–º—É–º
    

–û—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã.

---

# üö´ –ú–∏–Ω—É—Å—ã –∫–æ–ª–æ–Ω–æ—á–Ω—ã—Ö –ë–î

### ‚ùå 1. –ü–ª–æ—Ö–æ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è —á–∞—Å—Ç—ã—Ö INSERT/UPDATE/DELETE –ø–æ –º–∞–ª–µ–Ω—å–∫–∏–º –ø–æ—Ä—Ü–∏—è–º

–û–Ω–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –ø–æ–¥ bulk insert (–±–∞—Ç—á–µ–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏).

### ‚ùå 2. –ù–µ ACID –≤ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ–º —Å–º—ã—Å–ª–µ

ACID –µ—Å—Ç—å —É –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, Vertica), –Ω–æ —ç—Ç–æ —É—Å–ª–æ–∂–Ω—è–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.

### ‚ùå 3. –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è "–ø–ª–æ—Ö–æ" –¥–ª—è point lookup

–ù–∞–ø—Ä–∏–º–µ—Ä:

`SELECT * FROM users WHERE id=123;`

–°—Ç—Ä–æ–∫–æ–≤–∞—è –ë–î —á–∏—Ç–∞–µ—Ç 1 —Å—Ç—Ä–æ–∫—É.  
–ö–æ–ª–æ–Ω–æ—á–Ω–∞—è ‚Äî –¥–æ–ª–∂–Ω–∞ –≤—ã—á–∏—Ç–∞—Ç—å –º–Ω–æ–≥–æ –∫–æ–ª–æ–Ω–æ–∫.

---

# üèó –ö–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω–∞ –∫–æ–ª–æ–Ω–æ—á–Ω–∞—è –ë–î –≤–Ω—É—Ç—Ä–∏

### 1. **–ö–æ–ª–æ–Ω–∫–∞ ‚Üí —Å–µ–≥–º–µ–Ω—Ç—ã ‚Üí pages**

–ù–∞–ø—Ä–∏–º–µ—Ä:

`column ‚Äúprice‚Äù   ‚îú‚îÄ segment1 (1M –∑–Ω–∞—á–µ–Ω–∏–π)   ‚îú‚îÄ segment2 (1M –∑–Ω–∞—á–µ–Ω–∏–π)   ‚îî‚îÄ ...`

### 2. –°–∂–∞—Ç–∏–µ

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:

- RLE (Run Length Encoding)
    
- Dictionary encoding
    
- Bitmap encoding
    
- Delta encoding
    
- LZ4, ZSTD
    

### 3. Merging/Compaction

–î–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ—Ç–æ–∫–æ–≤—ã—Ö –≤—Å—Ç–∞–≤–æ–∫ –ë–î –¥–µ—Ä–∂–∏—Ç:

- –º–µ–º-—Ç–∞–±–ª–∏—Ü—É
    
- on-disk —Å–µ–≥–º–µ–Ω—Ç—ã
    
- –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∏—Ö —Å–ª–∏–≤–∞–µ—Ç (–∫–∞–∫ LSM-–¥–µ—Ä–µ–≤—å—è)
    

---

# üìä –ì–¥–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ–ª–æ–Ω–æ—á–Ω—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ò–¥–µ–∞–ª—å–Ω—ã –¥–ª—è:

- OLAP (–∞–Ω–∞–ª–∏—Ç–∏–∫–∞)
    
- big data
    
- –ª–æ–≥–æ–≤
    
- —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏
    
- –º–µ—Ç—Ä–∏–∫
    
- realtime –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
    

### –ù–µ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è:

- –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
    
- —Å–∏—Å—Ç–µ–º –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
    
- –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω—ã—Ö –ë–î
    

---

# üèÜ –ü—Ä–∏–º–µ—Ä—ã –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∫–æ–ª–æ–Ω–æ—á–Ω—ã—Ö –ë–î

## ‚≠ê **ClickHouse**

- —Å—É–ø–µ—Ä–±—ã—Å—Ç—Ä–∞—è
    
- —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ –≤ Yandex
    
- –æ—Ç–ª–∏—á–Ω–∞ –¥–ª—è –ª–æ–≥–æ–≤, –∞–Ω–∞–ª–∏—Ç–∏–∫–∏, realtime
    

## ‚≠ê **Apache Parquet (—Ñ–æ—Ä–º–∞—Ç), Apache ORC**

- –Ω–µ –ë–î, –Ω–æ –∫–æ–ª–æ–Ω–æ—á–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –¥–ª—è Hadoop/Spark
    

## ‚≠ê Amazon Redshift

- –∫–æ–ª–æ–Ω–Ω–æ—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≤ AWS
    

## ‚≠ê Google BigQuery

- –ø–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–ª–æ–Ω–æ—á–Ω–∞—è MPP –°–£–ë–î
    

## ‚≠ê Apache Druid / Pinot

- –∫–æ–ª–æ–Ω–æ—á–Ω—ã–µ + realtime ingestion
    

## ‚≠ê Vertica

- enterprise-–∫–æ–ª–æ–Ω–æ—á–Ω–∞—è –ë–î
    

---

# üÜö –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫–æ–≤–æ–π vs –∫–æ–ª–æ–Ω–æ—á–Ω–æ–π

|–¢–∏–ø –∑–∞–ø—Ä–æ—Å–∞|–°—Ç—Ä–æ–∫–æ–≤–∞—è –ë–î|–ö–æ–ª–æ–Ω–æ—á–Ω–∞—è –ë–î|
|---|---|---|
|Insert 1 row|–ë—ã—Å—Ç—Ä–æ|–°—Ä–µ–¥–Ω–µ|
|Update row|–ë—ã—Å—Ç—Ä–æ|–ú–µ–¥–ª–µ–Ω–Ω–µ–µ|
|–ë–æ–ª—å—à–∏–µ SELECT —Å –∞–≥—Ä–µ–≥–∞—Ü–∏—è–º–∏|–ú–µ–¥–ª–µ–Ω–Ω–æ|‚ö° –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–æ|
|JOIN –±–æ–ª—å—à–æ–≥–æ –æ–±—ä—ë–º–∞|–°—Ä–µ–¥–Ω–µ|–ë—ã—Å—Ç—Ä–æ|
|–ß—Ç–µ–Ω–∏–µ 1 —Å—Ç—Ä–æ–∫–∏|–ë—ã—Å—Ç—Ä–æ|–°—Ä–µ–¥–Ω–µ|
|–î–∞–Ω–Ω—ã–µ –Ω–∞ –¥–∏—Å–∫–µ|–ë–æ–ª—å—à–∏–µ|–°–∏–ª—å–Ω–æ —Å–∂–∞—Ç—ã|

---

# üß† –ò—Ç–æ–≥

**–ö–æ–ª–æ–Ω–æ—á–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö ‚Äî —ç—Ç–æ –∏–¥–µ–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –Ω–∞ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö.**  
–û–Ω–∞:

- –±—ã—Å—Ç—Ä–æ —Å—á–∏—Ç–∞–µ—Ç –∞–≥—Ä–µ–≥–∞—Ç—ã
    
- —ç–∫–æ–Ω–æ–º–∏—Ç –¥–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
    
- –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç CPU (–≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
    
- –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã—Ö –Ω–∞–≥—Ä—É–∑–æ–∫

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ**:

**–ü—Ä–∏–º–µ—Ä**:
[[ClickHouse]], [[Cassandra]]

**–î–æ–ø. —Å—Å—ã–ª–∫–∏:** [[–ù–µ—Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö]]


**Tags**: #IT #Backend  #–ë–∞–∑–∞–î–∞–Ω–Ω—ã—Ö 